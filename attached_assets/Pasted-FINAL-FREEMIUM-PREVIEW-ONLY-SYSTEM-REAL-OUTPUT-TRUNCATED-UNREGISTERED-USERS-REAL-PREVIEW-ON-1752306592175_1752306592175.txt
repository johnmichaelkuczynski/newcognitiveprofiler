FINAL FREEMIUM PREVIEW-ONLY SYSTEM (REAL OUTPUT â€” TRUNCATED)
ğŸ‘¤ UNREGISTERED USERS (REAL PREVIEW ONLY â€” LIMITED, AUTHENTIC)
Unregistered users may submit actual inputs

App generates genuine output using the real AI model

Preview is authentic, but truncated â€” max ~50 words or ~1â€“2 sentences

Small token cost is acceptable, but limit exposure

No full answers are ever shown to unregistered users

Truncated output ends with upgrade prompt

Preview Footer Message:
ğŸ”’ This is a real preview of your result.
[Register & Unlock Full Access]

Examples:
Grading App:
â€œGrade: B+ â€” Shows potential in argument structure...â€
â†’ ğŸ”’ [Register & Unlock Full Feedback]

Rewrite App:
â€œRevised: In today's society, efficiency is...â€
â†’ ğŸ”’ [Register & Unlock Full Rewrite]

Comparison App:
â€œEinstein: A+ | Your Text: B â€” Strong ideas, unclear logic...â€
â†’ ğŸ”’ [Register & Unlock Complete Comparison]

ğŸ”‘ REGISTERED USERS + CREDIT SYSTEM
ğŸ§¾ REGISTRATION
Email + password (no email verification)

Auth must persist across reloads

ğŸ’³ STRIPE CREDIT PURCHASE
Price	Tokens
$1	1,000 tokens
$10	20,000 tokens
$100	500,000 tokens
$1,000	10,000,000 tokens

Token balance updates immediately after purchase

Stored in Neon DB keyed to user ID

If balance = 0 â†’ block usage + show buy prompt

ğŸ“¤ DOCUMENT UPLOADS (REGISTERED USERS ONLY)
Upload Rules:
Only logged-in users can upload files (PDF, DOCX, TXT)

Free users attempting upload see:

ğŸ”’ File upload requires registration. [Register & Unlock Access]

Upload Cost:
1 token per 100 words (rounded up)

Min charge: 100 tokens

Max charge: 10,000 tokens

Deducted silently at upload

Optional Storage:
1 token per 250 words per month

Auto-deducted monthly

If balance = 0 â†’ lock access to file + show:

ğŸ”’ File storage paused until credits are added.

ğŸ§  NEON DATABASE SETUP
Shared PostgreSQL DB:
sql
Copy
Edit
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email TEXT UNIQUE NOT NULL,
  password_hash TEXT NOT NULL,
  token_balance INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE documents (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  filename TEXT NOT NULL,
  content TEXT NOT NULL,
  word_count INTEGER,
  uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
Security Rules:
Every query must filter by user_id

No user can see anotherâ€™s data

No schema separation â€” enforce on backend/frontend

Sample query:

ts
Copy
Edit
await db.select().from(documents).where(eq(documents.user_id, currentUserId));
ğŸ” SESSION-BASED TRACKING
Never use IPs for tracking (due to proxy churn)

Use session ID (or user ID if logged in)

Session persists across reloads

ğŸ§¾ TOKEN LOGGING
Log every token event with:

Timestamp

Session/User ID

Tokens used

Remaining balance

âœ… REQUIRED TEST CASES
Unregistered user submits â†’ gets real preview only

Registered user uploads â†’ tokens deducted correctly

Credit purchase â†’ balance updated immediately

Page reload â†’ session persists

User A sees only own files; User B cannot access

User A deletes â†’ only own files affected

